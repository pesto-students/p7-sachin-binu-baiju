create database WAREHOUSE;
use WAREHOUSE;

CREATE TABLE CITIES(
CITY_ID INTEGER PRIMARY KEY,
CITY CHAR(20),
STATE CHAR(20)
);
CREATE TABLE WAREHOUSES (
  WID INTEGER PRIMARY KEY,
  WNAME CHAR(30),
  LOCATION CHAR(20),
  EXTRA_CONTEXT JSON,
  CITY_ID INTEGER,
  FOREIGN KEY (CITY_ID) REFERENCES CITIES(CITY_ID)
);

CREATE TABLE CUSTOMER(
CNO INTEGER PRIMARY KEY, 
CNAME CHAR(50),
ADDRESS VARCHAR(50),
CCITY CHAR(20)
);
CREATE TABLE ORDERS(
ORDERNO INTEGER PRIMARY KEY,
ORDERDATE DATE,
CNO INTEGER,
FOREIGN KEY(CNO) REFERENCES CUSTOMER(CNO)
);
CREATE TABLE STORES (
SID INTEGER PRIMARY KEY,
STORE_NAME CHAR(20),
 LOCATION_CITY CHAR(20),
 WID INTEGER,
 FOREIGN KEY(WID) REFERENCES WAREHOUSES(WID)
);
CREATE TABLE ITEMS(
ITEMNO INTEGER PRIMARY KEY,
DESCRIPTION TEXT(50),
WEIGHT DECIMAL(5,2),
COST DECIMAL(5,2)
);

CREATE TABLE ORDER_ITEMS(
ORDERNO INTEGER,
ITEMNO INTEGER,
ORDERED_QUANTITY INTEGER,
PRIMARY KEY(ORDERNO,ITEMNO),
 FOREIGN KEY(ORDERNO) REFERENCES ORDERS(ORDERNO),
 FOREIGN KEY(ITEMNO) REFERENCES ITEMS(ITEMNO)
);
CREATE TABLE STORE_ITEMS(
SID INTEGER,
ITEMNO INTEGER,
ITEM_QUANTITY INTEGER,
PRIMARY KEY(SID,ITEMNO),
FOREIGN KEY(SID) REFERENCES STORES(SID),
FOREIGN KEY(ITEMNO) REFERENCES ITEMS(ITEMNO)
);

-- Inserting values

INSERT INTO CITIES (CITY_ID, CITY,STATE) VALUES (1, 'ERNAKULAM','KERALA');
INSERT INTO CITIES (CITY_ID, CITY,STATE) VALUES (2, 'BENGALURU','KARNATAKA');
INSERT INTO CITIES (CITY_ID, CITY,STATE) VALUES (3, 'PUNE','MAHARASTRA');

INSERT INTO WAREHOUSES (WID, WNAME, LOCATION, EXTRA_CONTEXT, CITY_ID) VALUES (1, 'Warehouse 1', 'VYPIN','{"capacity": 1000, "type": "Climate Controlled"}', 1);
INSERT INTO WAREHOUSES (WID, WNAME, LOCATION, EXTRA_CONTEXT, CITY_ID) VALUES (2, 'Warehouse 2', 'KOCHI','{"capacity": 2000, "type": "Dry Storage"}', 1);
INSERT INTO WAREHOUSES (WID, WNAME, LOCATION, EXTRA_CONTEXT, CITY_ID) VALUES (3, 'Warehouse 3', 'LALBAGH','{"capacity": 1500, "type": "Freezer Storage"}', 2);
INSERT INTO WAREHOUSES (WID, WNAME, LOCATION, EXTRA_CONTEXT, CITY_ID) VALUES (4, 'Warehouse 4', 'SHANIWAR','{"capacity": 1500, "type": "Freezer Storage"}', 3);
INSERT INTO WAREHOUSES (WID, WNAME, LOCATION, EXTRA_CONTEXT, CITY_ID) VALUES (5, 'Warehouse 5', 'RAJA MUSEUM','{"capacity": 1000, "type": "Climate Controlled"}', 3);

INSERT INTO STORES (SID, STORE_NAME, LOCATION_CITY, WID) VALUES (11, 'Store 1', 'NAYARAM', 1);
INSERT INTO STORES (SID, STORE_NAME, LOCATION_CITY, WID) VALUES (22, 'Store 2', 'NJARAKKAL', 1);
INSERT INTO STORES (SID, STORE_NAME, LOCATION_CITY, WID) VALUES (33, 'Store 3', 'MATTANCHERRY', 2);
INSERT INTO STORES (SID, STORE_NAME, LOCATION_CITY, WID) VALUES (44, 'Store 4', 'BHENNURAM', 2);
INSERT INTO STORES (SID, STORE_NAME, LOCATION_CITY, WID) VALUES (55, 'Store 5', 'SHANTINAGAR', 3);
INSERT INTO STORES (SID, STORE_NAME, LOCATION_CITY, WID) VALUES (66, 'Store 6', 'PUNESHANI', 4);
INSERT INTO STORES (SID, STORE_NAME, LOCATION_CITY, WID) VALUES (77, 'Store 7', 'PUNE RAJA', 5);


INSERT INTO CUSTOMER (CNO, CNAME, ADDRESS,CCITY) VALUES (111, 'John Doe', 'ERNAKULAM','EKM');
INSERT INTO CUSTOMER (CNO, CNAME, ADDRESS,CCITY) VALUES (222, 'Jane Smith', 'THRISSUR','THRI');
INSERT INTO CUSTOMER (CNO, CNAME, ADDRESS,CCITY) VALUES (333, 'Mr. Patil', 'PALAKKAD','PATTAMBI');


INSERT INTO ORDERS (ORDERNO, ORDERDATE, CNO) VALUES (1, '2023-03-05', 111);
INSERT INTO ORDERS (ORDERNO, ORDERDATE, CNO) VALUES (2, '2023-03-04', 111);
INSERT INTO ORDERS (ORDERNO, ORDERDATE, CNO) VALUES (3, '2023-03-03', 222);
INSERT INTO ORDERS (ORDERNO, ORDERDATE, CNO) VALUES (4, '2023-03-04', 222);
INSERT INTO ORDERS (ORDERNO, ORDERDATE, CNO) VALUES (5, '2023-03-04', 333);
INSERT INTO ORDERS (ORDERNO, ORDERDATE, CNO) VALUES (6, '2023-03-04', 333);



INSERT INTO ITEMS (ITEMNO, DESCRIPTION, WEIGHT,COST) VALUES (1, 'Item 1',100, 10.99);
INSERT INTO ITEMS (ITEMNO, DESCRIPTION, WEIGHT,COST) VALUES (2, 'Item 2',200, 5.99);
INSERT INTO ITEMS (ITEMNO, DESCRIPTION, WEIGHT,COST) VALUES (3, 'Item 3',300, 15.99);


INSERT INTO ORDER_ITEMS (ORDERNO, ITEMNO, ORDERED_QUANTITY) VALUES (1, 1, 2);
INSERT INTO ORDER_ITEMS (ORDERNO, ITEMNO, ORDERED_QUANTITY) VALUES (1, 2, 3);
INSERT INTO ORDER_ITEMS (ORDERNO, ITEMNO, ORDERED_QUANTITY) VALUES (2, 2, 1);
INSERT INTO ORDER_ITEMS (ORDERNO, ITEMNO, ORDERED_QUANTITY) VALUES (2, 3, 2);
INSERT INTO ORDER_ITEMS (ORDERNO, ITEMNO, ORDERED_QUANTITY) VALUES (5, 3, 2);
INSERT INTO ORDER_ITEMS (ORDERNO, ITEMNO, ORDERED_QUANTITY) VALUES (6, 3, 2);

INSERT INTO STORE_ITEMS (SID, ITEMNO, ITEM_QUANTITY) VALUES (11, 1, 10);
INSERT INTO STORE_ITEMS (SID, ITEMNO, ITEM_QUANTITY) VALUES (11, 2, 20);
INSERT INTO STORE_ITEMS (SID, ITEMNO, ITEM_QUANTITY) VALUES (22, 1, 5);
INSERT INTO STORE_ITEMS (SID, ITEMNO, ITEM_QUANTITY) VALUES (33, 3, 15);

select * from CITIES;
select * from CUSTOMER;
select * from ITEMS;
select * from ORDER_ITEMS;
select * from ORDERS;
select * from STORE_ITEMS;
select * from STORES;
select * from WAREHOUSES;